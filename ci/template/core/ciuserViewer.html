<!-- extends core/base_core.html-->
{% extends "core/base_core.html" %}

<!-- override block_head -->
{% block block_head %}
<!-- ciuserViewer.html block_head -->
<!-- css -->
<link type="text/css" rel="stylesheet" href="/static/ci/css/ciuserViewer.css" >
<!-- js -->
<script type="text/javascript" src="/static/ci/js/ciuserViewer.js"></script>
{% endblock block_head %}

<!-- override block_content -->
{% block block_content %}
<!-- ciuserViewer.html block_content -->
<!-- 標題列 -->
<div id="divHeader" class="row">
    <!-- 頭像 -->
    <div class="col-xs-2 text-center">
        <img class="img-circle" src="/{{ userHost.ciuser.avatarThumbnail.url }}" height="60" width="60">
    </div>
    <!-- 資料列 -->
    <div class="col-xs-10 row">
        <!-- 顯示名稱資料列 -->
        <div class="row">
            <div class="col-xs-2 text-right">
                <span>顯示名稱：</span>
            </div>
            <!-- 顯示名稱 -->
            <div class="col-xs-4 text-left">
                <span>{{ userHost.ciuser.strDisplayName }}</span>
            </div>
            <!-- email -->
            <div class="col-xs-4 text-right">
                <span>
                    <a href="mailto:{{ userHost.email }}">
                        {{ userHost.email }}
                    </a>
                </span>
            </div>
            <!-- email 認證 -->
            <div class="col-xs-2 text-left">
                {% if userHost.ciuser.isEmailVerified %}
                <span class="glyphicon glyphicon-ok text-success">email：已認證</span>
                {% else %}
                <span class="glyphicon glyphicon-remove text-danger">email：未認證</span>
                {% endif %}
            </div>
        </div>
        <!-- 個人 PV 資料列 -->
        <div class="row">
            <div class="col-xs-2 text-right">
                <span>個人 PV：</span>
            </div>
            <div class="col-xs-2 text-left">
                <span>{{ userHost.ciuser.intPointVolume }}</span>
            </div>
            <div class="col-xs-2 text-right">
                <span>領導人：</span>
            </div>
            <div class="col-xs-6 text-left">
                <!--avatar+name+link-->
            </div>
        </div>
        <!-- 團隊 PV 資料列 -->
        <div class="row" data-tooltip="on" title="團隊PV = 個人PV + 所有追隨者的個人PV">
            <div class="col-xs-2 text-right">
                <span>團隊 PV：</span>
            </div>
            <div class="col-xs-2 text-left">
                <span>{{ intRaidPV }}</span>
            </div>
            <div class="col-xs-2 text-right">
                <span>追隨者：</span>
            </div>
            <div class="col-xs-6 text-left">
                <!--follower links spinner -->
            </div>
        </div>
    </div>
</div>
<!-- 水平線 -->
<hr>
<div id="divContent" class="row">
    <!-- 聊天頻道 -->
    <div class="col-xs-8">
        <iframe id="iframeChatChannel" src="/chat/channel/{{ userHost.ciuser.strCIUserUID }}">
        </iframe>
    </div>
    <!-- 任務欄 -->
    <div class="col-xs-4">
        <!-- 接受的任務 -->
        <div class="row">
            <div class="bg-primary col-xs-10">
                接受的任務
                <span class="badge">{{ userHost.ciuser.executor_set.all.count }}</span>
            </div>
            <!-- 狀態過瀘 dropdown -->
            <div class="dropdown col-xs-2">
                <button class="btn btn-primary dropdown-toggle btn-xs" type="button" data-toggle="dropdown">
                    <span class="glyphicon glyphicon-filter"></span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right filterExecutorCIQuest">
                    <li>
                        <input type="checkbox" name="quest-state" value="matching" checked></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-plus-sign"></span>
                        配對中
                    </li>
                    <li>
                        <input type="checkbox" name="quest-state" value="processing" checked></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-question-sign"></span>
                        正在執行中
                    </li>
                    <li>
                        <input type="checkbox" name="quest-state" value="complete" checked></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-ok-sign"></span>
                        目標達成
                        
                    </li>
                    <li>
                        <input type="checkbox" name="quest-state" value="incomplete" checked></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-remove-sign"></span>
                        目標已無法達成
                    </li>
                    <li>
                        <input type="checkbox" name="quest-state" value="end_success"></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-ok"></span>
                        已終結-成功
                    </li>
                    <li>
                        <input type="checkbox" name="quest-state" value="end_failure"></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-remove"></span>
                        已終結-失敗
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
            <!-- 列表 -->
            <ul class="list-group col-xs-12">
                {% for matchedCIQuest in userHost.ciuser.executor_set.all %}
                <li class="list-group-item liExecutorCIQuest row" data-quest-state={{ matchedCIQuest.strState }}>
                    <!-- 任務狀態圖示 -->
                    {% if matchedCIQuest.strState == "new" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-exclamation-sign text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "matching" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-plus-sign text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "processing" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-question-sign text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "complete" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-ok-sign text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "incomplete" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-remove-sign text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "end_success" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-ok text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "end_failure" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-remove text-center col-xs-2"></span>
                    {% else %}
                    {% endif %}
                    <!-- 任務QID 隱藏 -->
                    <input type="hidden" class="strQID" name="strQID" value={{ matchedCIQuest.strQID }}></input>
                    <!-- 任務標題 -->
                    <a class="linkViewCIQuest text-left col-xs-6" href="javascript: void(0);">{{ matchedCIQuest.strHeadline }}</a>
                    <!-- 任務獎勵 -->
                    <span class="text-right col-xs-4">{{ matchedCIQuest.intRewardPV }} PV</span>
                </li>
                {% endfor %}
            </ul>
        </div>
        <!-- 發起的任務 -->
        <div class="row">
            <div class="bg-primary col-xs-10">
                發起的任務
                <span class="badge">{{ userHost.ciuser.initiator_set.all.count }}</span>
            </div>
            <!-- 狀態過瀘 dropdown -->
            <div class="dropdown col-xs-2">
                <button class="btn btn-primary dropdown-toggle btn-xs" type="button" data-toggle="dropdown">
                    <span class="glyphicon glyphicon-filter"></span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right filterInitiatorCIQuest">
                    <li>
                        <input type="checkbox" name="quest-state" value="new" checked></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-exclamation-sign"></span>
                        尚無人申請
                    </li>
                    <li>
                        <input type="checkbox" name="quest-state" value="matching" checked></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-plus-sign"></span>
                        配對中
                    </li>
                    <li>
                        <input type="checkbox" name="quest-state" value="processing" checked></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-question-sign"></span>
                        正在執行中
                    </li>
                    <li>
                        <input type="checkbox" name="quest-state" value="complete"></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-ok-sign"></span>
                        目標達成
                    </li>
                    <li>
                        <input type="checkbox" name="quest-state" value="incomplete"></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-remove-sign"></span>
                        目標已無法達成
                    </li>
                    <li>
                        <input type="checkbox" name="quest-state" value="end_success"></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-ok"></span>
                        已終結-成功
                    </li>
                    <li>
                        <input type="checkbox" name="quest-state" value="end_failure"></input>
                        <span class="spanQuestStateIcon glyphicon glyphicon-remove"></span>
                        已終結-失敗
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
            <!-- 列表 -->
            <ul class="list-group col-xs-12">
            {% for matchedCIQuest in userHost.ciuser.initiator_set.all %}
                <li class="list-group-item liInitiatorCIQuest row" data-quest-state={{ matchedCIQuest.strState }}>
                    <!-- 任務狀態圖示 -->
                    {% if matchedCIQuest.strState == "new" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-exclamation-sign text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "matching" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-plus-sign text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "processing" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-question-sign text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "complete" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-ok-sign text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "incomplete" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-remove-sign text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "end_success" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-ok text-center col-xs-2"></span>
                    {% elif matchedCIQuest.strState == "end_failure" %}
                    <span class="spanQuestStateIcon glyphicon glyphicon-remove text-center col-xs-2"></span>
                    {% else %}
                    {% endif %}
                    <!-- 任務QID 隱藏 -->
                    <input type="hidden" class="strQID" name="strQID" value={{ matchedCIQuest.strQID }}></input>
                    <!-- 任務標題 -->
                    <a class="linkViewCIQuest text-left col-xs-6" href="javascript: void(0);">{{ matchedCIQuest.strHeadline }}</a>
                    <!-- 任務獎勵 -->
                    <span class="text-right col-xs-4">{{ matchedCIQuest.intRewardPV }} PV</span>
                </li>
            {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock block_content %}